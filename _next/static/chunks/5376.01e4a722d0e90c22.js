"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5376],{38400:(e,r,t)=>{t.d(r,{a:()=>s});let s={THRESHOLD:"The threshold of a Safe Account specifies how many signers need to confirm a Safe Account transaction before it can be executed.",REVIEW_WINDOW:"A period that begins after a recovery is submitted on-chain, during which the Safe Account signers can review the proposal and cancel it before it is executable.",PROPOSAL_EXPIRY:"A period after which the recovery proposal will expire and can no longer be executed."}},15376:(e,r,t)=>{t.r(r),t.d(r,{ChangeThresholdFlowFieldNames:()=>y,default:()=>C});var s=t(74848),n=t(78562),l=t(6459),o=t(96540),i=t(57117),a=t(10256),h=t(68879),c=t(68130),d=t(91338);let x=e=>{let{params:r}=e,{safe:t}=(0,l.A)(),n=r[y.threshold],{setSafeTx:x,setSafeTxError:u}=(0,o.useContext)(c.H);return(0,o.useEffect)(()=>{(0,i.JL)(n).then(x).catch(u)},[n,x,u]),(0,s.jsx)(d.j.Provider,{value:{newThreshold:n},children:(0,s.jsx)(h.A,{onSubmit:()=>{(0,a.sx)({...a.kd.SETUP.OWNERS,label:t.owners.length}),(0,a.sx)({...a.kd.SETUP.THRESHOLD,label:n})},showMethodCall:!0})})};var u=t(73721),m=t(8109),j=t(49785),b=t(39324),p=t(96389),f=t(15542),A=t(38400),w=t(66946),v=t.n(w),S=t(31243);let g=e=>{let{params:r,onSubmit:t}=e,{safe:n}=(0,l.A)(),o=(0,j.mN)({defaultValues:r,mode:"onChange"}),i=o.watch(y.threshold);return(0,s.jsxs)(p.A,{children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(b.o5u,{variant:"h3",sx:{fontWeight:700},children:["Threshold",(0,s.jsx)(b.m_M,{title:A.a.THRESHOLD,arrow:!0,placement:"top",children:(0,s.jsx)("span",{children:(0,s.jsx)(b.Ahz,{component:f.A,inheritViewBox:!0,color:"border",fontSize:"small",sx:{verticalAlign:"middle",ml:.5}})})})]}),(0,s.jsx)(b.o5u,{children:"Any transaction will require the confirmation of:"})]}),(0,s.jsxs)("form",{onSubmit:o.handleSubmit(t),children:[(0,s.jsx)(b.azJ,{sx:{mb:2},children:(0,s.jsx)(j.xI,{control:o.control,rules:{validate:e=>{if(e===n.threshold)return"Current policy is already set to ".concat(n.threshold,".")}},name:y.threshold,render:e=>{var r;let{field:t,fieldState:l}=e,o=!!l.error;return(0,s.jsxs)(b.xA9,{container:!0,direction:"row",sx:{gap:2,alignItems:"center"},children:[(0,s.jsx)(b.xA9,{item:!0,children:(0,s.jsx)(b.A_L,{select:!0,...t,error:o,children:n.owners.map((e,r)=>(0,s.jsx)(b.Drp,{"data-testid":"threshold-item",value:r+1,children:r+1},r+1))})}),(0,s.jsx)(b.xA9,{item:!0,children:(0,s.jsxs)(b.o5u,{children:["out of ",n.owners.length," signer",(0,S.Tz)(n.owners)]})}),(0,s.jsx)(b.xA9,{item:!0,xs:12,children:o?(0,s.jsx)(b.o5u,{color:"error",sx:{mb:2},children:null===(r=l.error)||void 0===r?void 0:r.message}):(0,s.jsxs)(b.o5u,{sx:{mb:2},children:[l.isDirty?"Previous policy was ":"Current policy is ",(0,s.jsxs)("b",{children:[n.threshold," out of ",n.owners.length]}),"."]})})]})}})}),(0,s.jsx)(b.cGx,{className:v().nestedDivider}),(0,s.jsx)(b.waF,{children:(0,s.jsx)(b.$nd,{"data-testid":"threshold-next-btn",variant:"contained",type:"submit",disabled:!!o.formState.errors[y.threshold]||i===n.threshold,children:"Next"})})]})]})};var y=function(e){return e.threshold="threshold",e}({});let C=()=>{let{safe:e}=(0,l.A)(),{data:r,step:t,nextStep:o,prevStep:i}=(0,u.A)({threshold:e.threshold}),a=[(0,s.jsx)(g,{params:r,onSubmit:e=>o(e)},0),(0,s.jsx)(x,{params:r},1)];return(0,s.jsx)(n.A,{title:0===t?"New transaction":"Confirm transaction",subtitle:"Change threshold",icon:m.A,step:t,onBack:i,children:a})}},73721:(e,r,t)=>{t.d(r,{A:()=>l});var s=t(10256),n=t(96540);let l=(e,r)=>{let[t,l]=(0,n.useState)(0),[o,i]=(0,n.useState)(e);return{step:t,data:o,nextStep:(0,n.useCallback)(e=>{i(e),l(e=>(r&&(0,s.sx)({action:s.V4.Next,category:r,label:e}),e+1))},[r]),prevStep:(0,n.useCallback)(()=>{l(e=>(r&&(0,s.sx)({action:s.V4.Back,category:r,label:e}),e-1))},[r])}}}}]);
//# sourceMappingURL=5376.01e4a722d0e90c22.js.map