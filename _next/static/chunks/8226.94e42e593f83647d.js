"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8226],{38226:(e,t,n)=>{n.r(t),n.d(t,{default:()=>G});var a=n(74848),o=n(50836),i=n(130),r=n(38885),c=n(50988),s=n(96389),l=n(78562),d=n(36420),E=n(29005),_=n(12929),u=n(81870),x=n(3108),v=n(83936),p=n(56332),h=n(8220),T=n(27566),A=n(6459),w=n(45943),C=n(20781),m=n(10256),g=n(34867),f=n(55155),y=n(65605),R=n(79296),I=n(54505),j=n(39324),N=n(96540),X=n(49276),P=n(23807),S=n(22671),D=n(3960),b=n(79301),k=n(45787);let B=e=>{var t;let n=(0,p._J)(),[a]=(0,h.Ay)(),o=e&&((0,x.Ky)(null==e?void 0:e.props)?null==e?void 0:null===(t=e.props.safeDeploymentConfig)||void 0===t?void 0:t.safeVersion:null==e?void 0:e.props.safeVersion),{gasLimit:i}=(0,P.Z)(null==e?void 0:e.props,o),r=n&&(0,R.jI)(n,R.Gv.EIP1559),c=null==a?void 0:a.maxFeePerGas,s=null==a?void 0:a.maxPriorityFeePerGas;return{options:r?{maxFeePerGas:null==c?void 0:c.toString(),maxPriorityFeePerGas:null==s?void 0:s.toString(),gasLimit:null==i?void 0:i.toString()}:{gasPrice:null==c?void 0:c.toString(),gasLimit:null==i?void 0:i.toString()},totalFee:(0,h.$c)(c,i,n),walletCanPay:(0,w.A)({gasLimit:i,maxFeePerGas:c})}},G=()=>{let[e,t]=(0,N.useState)(!0),[n,h]=(0,N.useState)(),[w,P]=(0,N.useState)(E.S.RELAY),G=(0,p._J)(),O=(0,v.Ay)(),{safeAddress:U}=(0,A.A)(),V=(0,y.GV)(e=>(0,u.Bo)(e,O,U)),{setTxFlow:F}=(0,N.useContext)(c.P),L=(0,C.Ay)(),{options:M,totalFee:z,walletCanPay:Y}=B(V),J=(0,S.A)(),Z=(0,N.useMemo)(()=>(0,x.kp)(V,O),[V,O]),K=V&&(0,x.Ky)(null==V?void 0:V.props)?null==V?void 0:V.props.safeAccountConfig:void 0,H=(null==Z?void 0:Z.owners)||[],[W]=(0,T.x6)(H),$=(0,I.v)(W),q=$&&w===E.S.RELAY;if(!V||!Z)return null;let{owners:Q,threshold:ee,safeVersion:et}=Z,en=(0,k.getSafeToL2SetupDeployment)({version:"1.4.1",network:null==G?void 0:G.chainId}),ea=null==en?void 0:en.defaultAddress,eo=(0,X.xU)(null==K?void 0:K.to,ea),ei=e=>{(0,m.sx)({...g.V.CREATE,label:g.p.activate_without_tx}),(0,m.sx)({...g.V.EXECUTE,label:g.p.activate_without_tx}),(0,m.sx)(m.Cw.ONCHAIN_INTERACTION),e&&(0,_.p5)(_.Zf.PROCESSING,{groupKey:x.Xh,txHash:e,safeAddress:U}),F(void 0)},er=async()=>{if(L&&G){(0,m.sx)({...m.kg.PROCEED_WITH_TX,label:g.p.activate_without_tx}),t(!1),h(void 0);try{if(q){let e=await (0,o.ST)(G,V.props);(0,_.p5)(_.Zf.RELAYING,{groupKey:x.Xh,taskId:e,safeAddress:U}),ei()}else await (0,o.sZ)(L.provider,V.props,null!=et?et:(0,R.Tw)(G),G,M,ei,!!eo||void 0)}catch(n){let e=(0,f.z)(n);t(!0),h(e);return}}},ec=!e||J;return(0,a.jsx)(l.A,{title:"Activate account",hideNonce:!0,children:(0,a.jsxs)(s.A,{children:[(0,a.jsx)(j.o5u,{children:"You're about to deploy this Safe Account and will have to confirm the transaction with your connected wallet."}),(0,a.jsx)(j.cGx,{sx:{mx:-3,my:2}}),(0,a.jsx)(i.GT,{owners:Q.map(e=>({name:"",address:e})),threshold:ee,networks:G?[G]:[]}),(0,a.jsx)(j.cGx,{sx:{mx:-3,mt:2,mb:1}}),(0,a.jsxs)(j.azJ,{display:"flex",flexDirection:"column",gap:3,children:[$&&(0,a.jsx)(j.xA9,{container:!0,spacing:3,children:(0,a.jsx)(r.A,{name:"Execution method",value:(0,a.jsx)(E.Z,{executionMethod:w,setExecutionMethod:P,relays:W})})}),(0,a.jsx)(j.xA9,{"data-testid":"network-fee-section",container:!0,spacing:3,children:(0,a.jsx)(r.A,{name:"Est. network fee",value:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.dz,{totalFee:z,isWaived:q||J,chain:G}),!q&&(0,a.jsx)(j.o5u,{variant:"body2",color:"text.secondary",mt:1,children:J?"Switch your connected wallet to ".concat(null==G?void 0:G.chainName," to see the correct estimated network fee"):"You will have to confirm a transaction with your connected wallet."})]})})}),n&&(0,a.jsx)(j.azJ,{mt:1,children:(0,a.jsx)(d.A,{error:n,children:"Error submitting the transaction. Please try again."})}),J&&(0,a.jsx)(D.A,{}),!Y&&!q&&(0,a.jsx)(d.A,{children:"Your connected wallet doesn't have enough funds to execute this transaction"})]}),(0,a.jsx)(j.cGx,{sx:{mx:-3,mt:2,mb:1}}),(0,a.jsx)(j.azJ,{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:3,children:(0,a.jsx)(b.A,{checkNetwork:!ec,allowNonOwner:!0,allowUndeployedSafe:!0,children:t=>(0,a.jsx)(j.$nd,{"data-testid":"activate-account-flow-btn",onClick:er,variant:"contained",size:"stretched",disabled:!t||ec,children:e?"Activate":(0,a.jsx)(j.PaH,{size:20})})})})]})})}},34867:(e,t,n)=>{n.d(t,{V:()=>r,p:()=>o});var a=n(31529),o=function(e){return e.owner_add="owner_add",e.owner_remove="owner_remove",e.owner_swap="owner_swap",e.owner_threshold_change="owner_threshold_change",e.guard_remove="guard_remove",e.module_remove="module_remove",e.transfer_token="transfer_token",e.transfer_nft="transfer_nft",e.batch="batch",e.rejection="rejection",e.typed_message="typed_message",e.nested_safe="nested_safe",e.walletconnect="walletconnect",e.custom="custom",e.native_bridge="native_bridge",e.native_swap="native_swap",e.bulk_execute="bulk_execute",e.activate_without_tx="activate_without_tx",e.activate_with_tx="activate_with_tx",e}({});let i="transactions",r={CREATE:{event:a.Bx.TX_CREATED,action:"Create transaction",category:i},CREATE_VIA_ROLE:{event:a.Bx.TX_CREATED,action:"Create via role",category:i},CREATE_VIA_SPENDING_LIMTI:{event:a.Bx.TX_CREATED,action:"Create via spending limit",category:i},CREATE_VIA_PROPOSER:{event:a.Bx.TX_CREATED,action:"Create via proposer",category:i},CONFIRM:{event:a.Bx.TX_CONFIRMED,action:"Confirm transaction",category:i},EXECUTE:{event:a.Bx.TX_EXECUTED,action:"Execute transaction",category:i},SPEED_UP:{event:a.Bx.TX_EXECUTED,action:"Speed up transaction",category:i},EXECUTE_VIA_SPENDING_LIMIT:{event:a.Bx.TX_EXECUTED,action:"Execute via spending limit",category:i},EXECUTE_VIA_ROLE:{event:a.Bx.TX_EXECUTED,action:"Execute via role",category:i},CREATE_VIA_PARENT:{event:a.Bx.TX_CREATED,action:"Create via parent",category:i},CONFIRM_VIA_PARENT:{event:a.Bx.TX_CREATED,action:"Confirm via parent",category:i},EXECUTE_VIA_PARENT:{event:a.Bx.TX_CREATED,action:"Execute via parent",category:i},CONFIRM_IN_PARENT:{event:a.Bx.TX_CONFIRMED,action:"Confirm in parent",category:i},EXECUTE_IN_PARENT:{event:a.Bx.TX_EXECUTED,action:"Execute in parent",category:i}}}}]);
//# sourceMappingURL=8226.94e42e593f83647d.js.map