{"version":3,"file":"static/chunks/4884.9f153fc2eb3b2f5f.js","mappings":"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","sources":["webpack://_N_E/./src/components/tx-flow/flows/RemoveSpendingLimit/RemoveSpendingLimit.tsx","webpack://_N_E/./src/components/tx-flow/flows/RemoveSpendingLimit/index.tsx"],"sourcesContent":["import SignOrExecuteForm from '@/components/tx/SignOrExecuteForm'\nimport {\n  getSpendingLimitInterface,\n  getDeployedSpendingLimitModuleAddress,\n} from '@/services/contracts/spendingLimitContracts'\nimport useChainId from '@/hooks/useChainId'\nimport { useContext, useEffect } from 'react'\nimport { SafeTxContext } from '../../SafeTxProvider'\nimport EthHashInfo from '@/components/common/EthHashInfo'\nimport { Grid, Typography } from '@mui/material'\nimport type { SpendingLimitState } from '@/store/spendingLimitsSlice'\nimport { relativeTime } from '@/utils/date'\nimport { trackEvent, SETTINGS_EVENTS } from '@/services/analytics'\nimport useBalances from '@/hooks/useBalances'\nimport SendAmountBlock from '@/components/tx-flow/flows/TokenTransfer/SendAmountBlock'\nimport SpendingLimitLabel from '@/components/common/SpendingLimitLabel'\nimport { createTx } from '@/services/tx/tx-sender'\nimport useSafeInfo from '@/hooks/useSafeInfo'\n\nconst onFormSubmit = () => {\n  trackEvent(SETTINGS_EVENTS.SPENDING_LIMIT.LIMIT_REMOVED)\n}\n\nexport const RemoveSpendingLimit = ({ params }: { params: SpendingLimitState }) => {\n  const { setSafeTx, setSafeTxError } = useContext(SafeTxContext)\n  const chainId = useChainId()\n  const { safe } = useSafeInfo()\n  const { balances } = useBalances()\n  const token = balances.items.find((item) => item.tokenInfo.address === params.token.address)\n\n  const amountInWei = params.amount\n\n  useEffect(() => {\n    if (!safe.modules?.length) return\n\n    const spendingLimitAddress = getDeployedSpendingLimitModuleAddress(chainId, safe.modules)\n    if (!spendingLimitAddress) return\n\n    const spendingLimitInterface = getSpendingLimitInterface()\n    const txData = spendingLimitInterface.encodeFunctionData('deleteAllowance', [\n      params.beneficiary,\n      params.token.address,\n    ])\n\n    const txParams = {\n      to: spendingLimitAddress,\n      value: '0',\n      data: txData,\n    }\n\n    createTx(txParams).then(setSafeTx).catch(setSafeTxError)\n  }, [chainId, params.beneficiary, params.token, setSafeTx, setSafeTxError, safe.modules])\n\n  return (\n    <SignOrExecuteForm onSubmit={onFormSubmit}>\n      {token && <SendAmountBlock amountInWei={amountInWei} tokenInfo={token.tokenInfo} title=\"Amount\" />}\n      <Grid\n        container\n        sx={{\n          gap: 1,\n          alignItems: 'center',\n        }}\n      >\n        <Grid item md>\n          <Typography\n            variant=\"body2\"\n            sx={{\n              color: 'text.secondary',\n            }}\n          >\n            Beneficiary\n          </Typography>\n        </Grid>\n        <Grid item md={10}>\n          <EthHashInfo\n            address={params.beneficiary}\n            showCopyButton\n            hasExplorer\n            shortAddress={false}\n            showAvatar={false}\n          />\n        </Grid>\n      </Grid>\n      <Grid\n        container\n        sx={{\n          gap: 1,\n          alignItems: 'center',\n        }}\n      >\n        <Grid item md>\n          <Typography\n            variant=\"body2\"\n            sx={{\n              color: 'text.secondary',\n            }}\n          >\n            Reset time\n          </Typography>\n        </Grid>\n        <Grid item md={10}>\n          <SpendingLimitLabel\n            label={relativeTime(params.lastResetMin, params.resetTimeMin)}\n            isOneTime={params.resetTimeMin === '0'}\n          />\n        </Grid>\n      </Grid>\n    </SignOrExecuteForm>\n  )\n}\n","import TxLayout from '@/components/tx-flow/common/TxLayout'\nimport { RemoveSpendingLimit } from './RemoveSpendingLimit'\nimport type { SpendingLimitState } from '@/store/spendingLimitsSlice'\nimport SaveAddressIcon from '@/public/images/common/save-address.svg'\n\nconst RemoveSpendingLimitFlow = ({ spendingLimit }: { spendingLimit: SpendingLimitState }) => {\n  return (\n    <TxLayout title=\"Confirm transaction\" subtitle=\"Remove spending limit\" icon={SaveAddressIcon}>\n      <RemoveSpendingLimit params={spendingLimit} />\n    </TxLayout>\n  )\n}\n\nexport default RemoveSpendingLimitFlow\n"],"names":["onFormSubmit","trackEvent","SETTINGS_EVENTS","SPENDING_LIMIT","LIMIT_REMOVED","RemoveSpendingLimit","params","setSafeTx","setSafeTxError","useContext","SafeTxContext","chainId","useChainId","safe","useSafeInfo","balances","useBalances","token","items","find","item","tokenInfo","address","amountInWei","amount","useEffect","modules","length","spendingLimitAddress","getDeployedSpendingLimitModuleAddress","txData","spendingLimitInterface","getSpendingLimitInterface","encodeFunctionData","beneficiary","createTx","txParams","to","value","data","then","catch","SignOrExecuteForm","onSubmit","SendAmountBlock","title","Grid","container","sx","gap","alignItems","md","Typography","variant","color","EthHashInfo","showCopyButton","hasExplorer","shortAddress","showAvatar","SpendingLimitLabel","label","relativeTime","lastResetMin","resetTimeMin","isOneTime","spendingLimit","TxLayout","RemoveSpendingLimitFlow","subtitle","icon","SaveAddressIcon"],"sourceRoot":"","ignoreList":[]}