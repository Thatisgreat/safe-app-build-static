(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9085],{76246:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/transactions/msg",function(){return a(117)}])},65937:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var r=a(10804),s=a(96540),i=a(21520),n=a(56680),d=a(6459),l=a(8728);let c=e=>{var t,a;let[c,u]=(0,s.useState)(),{safe:o}=(0,d.A)(),h=null===(a=(0,i.A)().page)||void 0===a?void 0:null===(t=a.results)||void 0===t?void 0:t.filter(r.a).find(t=>t.messageHash===e),[g,f]=(0,n.A)(async()=>{if(e)return(0,l.t)(e,o.chainId)},[e,o.chainId,o.messagesTag]);return(0,s.useEffect)(()=>{u(null!=g?g:h)},[h,g]),[c,u,f]}},8728:(e,t,a)=>{"use strict";a.d(t,{A:()=>v,t:()=>p});var r=a(20781),s=a(21886),i=a(55155),n=a(51460),d=a(8442),l=a(57279),c=a(63304),u=a(54993),o=a(42309);let h=async e=>{let{provider:t,safe:a,message:r,origin:s=""}=e,n=(0,c.iD)(a,r);try{let e=await (0,o.Z3)(t),i=await (0,c.K_)(e,a,r),n=r;(0,c.nW)(r)&&(n=(0,u.mk)(r)),await (0,d.proposeSafeMessage)(a.chainId,a.address.value,{message:n,signature:i,origin:s})}catch(e){throw(0,l.hH)(l.Nd.PROPOSE_FAILED,{messageHash:n,error:(0,i.z)(e)}),e}(0,l.hH)(l.Nd.PROPOSE,{messageHash:n})},g=async e=>{let{provider:t,safe:a,message:r}=e,s=(0,c.iD)(a,r);try{let e=await (0,o.Z3)(t),i=await (0,c.K_)(e,a,r);await (0,d.confirmSafeMessage)(a.chainId,s,{signature:i})}catch(e){throw(0,l.hH)(l.Nd.CONFIRM_PROPOSE_FAILED,{messageHash:s,error:(0,i.z)(e)}),e}(0,l.hH)(l.Nd.CONFIRM_PROPOSE,{messageHash:s})};var f=a(96540),m=a(6459);let p=async(e,t)=>{let a;try{a={...await (0,d.getSafeMessage)(t,e),type:d.SafeMessageListItemType.MESSAGE}}catch(e){throw(0,s.vV)(s.I._613,e),e}return a},v=(e,t,a,s,d,l)=>{let[c,u]=(0,f.useState)(),o=(0,r.Ay)(),{safe:v}=(0,m.A)();return(0,f.useEffect)(()=>{let t;return(null==e?void 0:e.preparedSignature)&&(t=setTimeout(()=>(0,n.Q)(e,a,l,s),3e3)),()=>clearTimeout(t)},[e,v.chainId,a,l,s]),{submitError:c,onSign:(0,f.useCallback)(async()=>{if(o){u(void 0);try{if(e){if(await g({provider:o.provider,safe:v,message:t}),!s){l();return}let e=await p(a,v.chainId);return setTimeout(()=>(0,n.Q)(e,a,l,s),3e3),e}{await h({provider:o.provider,safe:v,message:t,origin:d});let e=await p(a,v.chainId);return 1===v.threshold&&setTimeout(()=>(0,n.Q)(e,a,l,s),3e3),e}}catch(e){u((0,i.z)(e))}}},[o,v,e,t,d,a,l,s])}}},117:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var r=a(74848),s=a(13368),i=a.n(s),n=a(66247),d=a(86715),l=a(79110),c=a(95366),u=a(44702),o=a(65937),h=a(36420);let g=()=>{let{messageHash:e}=(0,d.useRouter)().query,t=Array.isArray(e)?e[0]:e,[a,,s]=(0,o.A)(t);return a?(0,r.jsx)(l.b,{children:(0,r.jsx)(u.A,{msg:a,expanded:!0})}):s?(0,r.jsx)(h.A,{error:s,children:"Failed to load message"}):(0,r.jsx)(c.OQ,{})};var f=a(11100);let m=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"".concat(f.Az," â€“ Message details")})}),(0,r.jsxs)("main",{children:[(0,r.jsx)(n.A,{"data-testid":"tx-details",variant:"h3",fontWeight:700,pt:1,mb:3,children:"Message details"}),(0,r.jsx)(g,{})]})]})},51460:(e,t,a)=>{"use strict";a.d(t,{Q:()=>i});var r=a(57279);let s=e=>e.confirmationsSubmitted>=e.confirmationsRequired&&!!e.preparedSignature,i=async(e,t,a,i)=>{s(e)&&((0,r.hH)(r.Nd.SIGNATURE_PREPARED,{messageHash:t,requestId:i,signature:e.preparedSignature}),a())}}},e=>{var t=t=>e(e.s=t);e.O(0,[5699,6780,5566,4133,4073,6973,636,6593,8792],()=>t(76246)),_N_E=e.O()}]);
//# sourceMappingURL=msg-77f2cdef54e70dde.js.map