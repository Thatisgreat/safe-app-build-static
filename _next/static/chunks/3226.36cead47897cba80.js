(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3226],{93226:(e,s,t)=>{"use strict";t.r(s),t.d(s,{AppTitle:()=>eS,default:()=>e_});var i=t(74848),n=t(78562),a=t(39324),r=t(42907),l=t(95108),o=t(96540),d=t(8442),c=t(73536),h=t(21611),u=t(6459),g=t(72040),m=t(36420),x=t(20781),f=t(65937),j=t(99744),v=t(50988),p=t(18431),A=t(28600),y=t(37185),w=t(63304);let b=(e,s)=>{let t=(0,o.useMemo)(()=>"string"==typeof e?(0,y.MU)(e):e,[e]),i=(0,o.useMemo)(()=>(0,w.vB)(t),[t]),n=(0,o.useMemo)(()=>(0,w.iD)(s,t),[s,t]);return{decodedMessage:t,safeMessageMessage:i,safeMessageHash:n}};var S=t(8728),_=t(33680),E=t(53373),C=t.n(E),M=t(15367),I=t(32150),N=t.n(I);let k=e=>{let{children:s,className:t}=e;return(0,i.jsx)("div",{className:C()(N().container,t),children:(0,i.jsxs)("div",{className:N().message,children:[(0,i.jsx)(_.Ahz,{component:M.A,color:"success",inheritViewBox:!0,fontSize:"small"}),(0,i.jsx)(_.o5u,{variant:"body2",width:"100%",children:s})]})})};var T=t(38105),O=t(15542),F=t(59045),P=t.n(F);let R=e=>{let{title:s,message:t,children:n,icon:r=O.A}=e;return(0,i.jsxs)("div",{"data-testid":"message-infobox",className:P().container,children:[(0,i.jsxs)("div",{className:P().message,children:[(0,i.jsx)(a.Ahz,{component:r,color:"info",inheritViewBox:!0,fontSize:"medium"}),(0,i.jsxs)("div",{children:[(0,i.jsx)(a.o5u,{variant:"subtitle1",fontWeight:"bold",children:s}),(0,i.jsx)(a.o5u,{variant:"body2",children:t})]})]}),n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.cGx,{className:P().divider}),(0,i.jsx)("div",{children:n})]})]})};var V=t(97295),z=t(96389),H=t(51460),B=t(10256),q=t(34867),W=t(68130),D=t(69577);let L=()=>{let{isRiskConfirmed:e,isRiskIgnored:s}=(0,o.useContext)(D.Cr);return e||!s?null:(0,i.jsx)(m.A,{level:"warning",children:"Please acknowledge the risk before proceeding."})};var G=t(19695),Q=t(98739),U=t(44894),J=t(65605),K=t(42837),X=t(91106),Y=t.n(X),Z=t(95347),$=t(86715),ee=t(2784),es=t(18600),et=t(95476),ei=t(79301),en=t(3960),ea=t(33416);let er=e=>({confirmations:[],confirmationsRequired:e,confirmationsSubmitted:0,creationTimestamp:0,message:"",logoUri:null,messageHash:"",modifiedTimestamp:0,name:null,proposedBy:{value:""},status:d.SafeMessageStatus.NEEDS_CONFIRMATION,type:d.SafeMessageListItemType.MESSAGE}),el=e=>{let{label:s,hashValue:t}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.o5u,{variant:"body2",sx:{fontWeight:700,mt:2},children:[s,":"]}),(0,i.jsx)(a.o5u,{"data-testid":"message-hash",variant:"body2",component:"div",children:(0,i.jsx)(c.A,{address:t,showAvatar:!1,shortAddress:!1,showCopyButton:!0})})]})},eo=e=>{let{threshold:s}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.azJ,{sx:{textAlign:"center",mb:2},children:(0,i.jsx)(a.Ahz,{component:h.A,viewBox:"0 0 32 32",fontSize:"large"})}),(0,i.jsx)(a.o5u,{variant:"h4",gutterBottom:!0,sx:{textAlign:"center"},children:"Confirm message"}),s>1&&(0,i.jsxs)(a.o5u,{variant:"body1",sx:{textAlign:"center",mb:2},children:["To sign this message, collect signatures from ",(0,i.jsxs)("b",{children:[s," signers"]})," of your Safe Account."]})]})},ed=e=>{let{isOwner:s,submitError:t}=e,n=(0,x.Ay)(),a=(0,j.Ay)(),r=n&&a?s?t&&(0,U.jG)(t)?"User rejected signing.":t?"Error confirming the message. Please try again.":null:"You are currently not a signer of this Safe Account and won't be able to confirm this message.":"No wallet is connected.";return r?(0,i.jsx)(m.A,{children:r}):null},ec=e=>{let{hasSigned:s}=e,t=(0,j.Ay)();return s?(0,i.jsx)(k,{children:(0,i.jsxs)(a.xA9,{container:!0,direction:"row",sx:{justifyContent:"space-between"},children:[(0,i.jsx)(a.xA9,{item:!0,xs:7,children:"Your connected wallet has already signed this message."}),(0,i.jsx)(a.xA9,{item:!0,xs:4,children:(0,i.jsx)(a.$nd,{variant:"contained",size:"small",onClick:()=>{t&&(0,j.Kk)(t)},fullWidth:!0,children:"Switch wallet"})})]})}):null},eh=e=>{let{isBlindSigningEnabled:s,isBlindSigningPayload:t}=e,n=(0,$.useRouter)(),r=n.query.safe?{safe:n.query.safe}:void 0;return t?(0,i.jsxs)(m.A,{level:s?"warning":"error",children:["This request involves"," ",(0,i.jsx)(a.N_E,{component:Y(),href:{pathname:Z.S.settings.security,query:r},children:"blind signing"}),", which can lead to unpredictable outcomes.",(0,i.jsx)("br",{}),s?"Proceed with caution.":(0,i.jsxs)(i.Fragment,{children:["If you wish to proceed, you must first"," ",(0,i.jsx)(a.N_E,{component:Y(),href:{pathname:Z.S.settings.security,query:r},children:"enable blind signing"}),"."]})]}):null},eu=e=>{let{safeMessage:s,onContinue:t}=e;return(0,i.jsxs)(z.A,{children:[(0,i.jsx)(a.o5u,{variant:"h4",gutterBottom:!0,sx:{textAlign:"center"},children:"Message successfully signed"}),(0,i.jsx)(A.A,{msg:s,showOnlyConfirmations:!0,showMissingSignatures:!0}),(0,i.jsx)(a.waF,{children:(0,i.jsx)(a.$nd,{variant:"contained",color:"primary",onClick:t,disabled:!s.preparedSignature,children:"Continue"})})]})},eg=e=>{let{message:s,origin:t,requestId:n}=e,{setTxFlow:d}=(0,o.useContext)(v.P),{setSafeMessage:c}=(0,o.useContext)(W.H),{needsRiskConfirmation:h,isRiskConfirmed:j,setIsRiskIgnored:y}=(0,o.useContext)(D.Cr),{palette:_}=(0,r.A)(),{safe:E}=(0,u.A)(),C=(0,g.A)(),M=(0,x.Ay)();(0,T.A)();let{decodedMessage:I,safeMessageMessage:N,safeMessageHash:k}=b(s,E),[O,F]=(0,f.A)(k),P=(0,ea.Jv)({chainId:E.chainId,safeAddress:E.address.value,safeVersion:E.version}),U=(0,ea._k)({message:I,safeVersion:E.version}),X="string"==typeof I?I:JSON.stringify(I,null,2),Y=!!(null==O?void 0:O.confirmations.some(e=>{let{owner:s}=e;return s.value===(null==M?void 0:M.address)})),Z=(null==O?void 0:O.confirmations)&&O.confirmations.length>0,$=!!(null==O?void 0:O.preparedSignature),eg=(0,w.nW)(I),em=(0,w.LA)(I),ex=(0,J.GV)(K.ph),ef=!C||Y||!E.deployed||!ex&&em,{onSign:ej,submitError:ev}=(0,S.A)(O,I,k,n,t,()=>d(void 0)),ep=async()=>{if(h&&!j){y(!0);return}let e=await ej();e&&F(e);let s=(null==e?void 0:e.confirmations.length)===1;(0,B.sx)({...s?q.V.CREATE:q.V.CONFIRM,label:q.p.typed_message})},eA=async()=>{O&&await (0,H.Q)(O,k,()=>d(void 0),n)};return(0,o.useEffect)(()=>{"string"!=typeof s&&c(s)},[s,c]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(z.A,{children:(0,i.jsxs)(a.Wux,{children:[(0,i.jsx)(eo,{threshold:E.threshold}),eg&&(0,i.jsx)(Q.tH,{fallback:(0,i.jsx)("div",{children:"Error parsing data"}),children:(0,i.jsx)(G.A,{safeMessage:I})}),(0,i.jsx)(eh,{isBlindSigningEnabled:ex,isBlindSigningPayload:em}),(0,i.jsxs)(a.o5u,{sx:{fontWeight:700,mt:2,mb:1},children:["Message: ",(0,i.jsx)(p.A,{text:X})]}),(0,i.jsx)(V.O,{message:I,isInModal:!0}),(0,i.jsxs)(a.nD3,{sx:{mt:2},children:[(0,i.jsx)(a.Xo_,{"data-testid":"message-details",expandIcon:(0,i.jsx)(l.A,{}),children:"SafeMessage details"}),(0,i.jsxs)(a.ZiS,{children:[(0,i.jsx)(el,{label:"SafeMessage",hashValue:N}),(0,i.jsx)(el,{label:"SafeMessage hash",hashValue:k}),(0,i.jsx)(el,{label:"Domain hash",hashValue:P}),(0,i.jsx)(el,{label:"Message hash",hashValue:U})]})]}),(0,i.jsx)(a.azJ,{sx:{"&:not(:empty)":{mt:2}},children:(0,i.jsx)(et.w1,{})})]})}),$?(0,i.jsx)(eu,{onContinue:eA,safeMessage:O}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(z.A,{children:[(0,i.jsx)(ec,{hasSigned:Y}),(0,i.jsx)(R,{title:"Collect all the confirmations",message:n&&!Z?"Please keep this modal open until all signers confirm this message. Closing the modal will abort the signing request.":"The signature will be submitted to the requesting app when the message is fully signed.",children:(0,i.jsx)(A.A,{msg:null!=O?O:er(E.threshold),showOnlyConfirmations:!0,showMissingSignatures:!0,backgroundColor:_.info.background})}),Z&&(0,i.jsx)(R,{title:"Share the link with other owners",message:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.o5u,{sx:{mb:2},children:"The owners will receive a notification about signing the message. You can also share the link with them to speed up the process."}),(0,i.jsx)(ee.A,{safeMessageHash:k,button:!0})]}),icon:es.A}),(0,i.jsx)(en.A,{}),(0,i.jsx)(ed,{isOwner:C,submitError:ev}),(0,i.jsx)(L,{}),!E.deployed&&(0,i.jsx)(m.A,{children:"Your Safe Account is not activated yet."})]}),(0,i.jsx)(z.A,{children:(0,i.jsx)(a.waF,{children:(0,i.jsx)(ei.A,{checkNetwork:!ef,children:e=>(0,i.jsx)(a.$nd,{variant:"contained",color:"primary",onClick:ep,disabled:!e||ef,children:"Sign"})})})})]})]})};var em=t(44178),ex=t(74305),ef=t(22434),ej=t(47748),ev=t(29251),ep=t(60812),eA=t(72203);let ey=(0,eA.id)("requestValidatorsExit(bytes)").slice(0,10),ew=(0,eA.id)("batchWithdrawCLFee(bytes)").slice(0,10),eb=e=>{let s={[ey]:"Withdraw request",[ew]:"Claim"};return null==e?void 0:e.map(e=>s[e.data.slice(0,10)]).filter(Boolean).join(" and ")},eS=e=>{let{name:s,logoUri:t,txs:n}=e,a=(0,J.GV)(ex.AN),r=s||"Sign message";return s===ev.Lo&&(r=(0,em.getSwapTitle)(a.tradeType,n)||r),s===ep.w5&&(r=eb(n)||r),(0,i.jsxs)(ef.azJ,{display:"flex",alignItems:"center",children:[(0,i.jsx)(ej.A,{src:t||"/images/apps/apps-icon.svg",alt:s||"The icon of the application",width:32,height:32}),(0,i.jsx)(ef.o5u,{variant:"h4",pl:2,fontWeight:"bold",children:r})]})},e_=e=>{let{...s}=e;return(0,i.jsx)(n.A,{title:"Confirm message",subtitle:(0,i.jsx)(eS,{name:s.name,logoUri:s.logoUri}),step:0,hideNonce:!0,isMessage:!0,children:(0,i.jsx)(Q.tH,{fallback:(0,i.jsx)("div",{children:"Error signing message"}),children:(0,i.jsx)(eg,{...s})})})}},65937:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var i=t(10804),n=t(96540),a=t(21520),r=t(56680),l=t(6459),o=t(8728);let d=e=>{var s,t;let[d,c]=(0,n.useState)(),{safe:h}=(0,l.A)(),u=null===(t=(0,a.A)().page)||void 0===t?void 0:null===(s=t.results)||void 0===s?void 0:s.filter(i.a).find(s=>s.messageHash===e),[g,m]=(0,r.A)(async()=>{if(e)return(0,o.t)(e,h.chainId)},[e,h.chainId,h.messagesTag]);return(0,n.useEffect)(()=>{c(null!=g?g:u)},[u,g]),[d,c,m]}},8728:(e,s,t)=>{"use strict";t.d(s,{A:()=>j,t:()=>f});var i=t(20781),n=t(21886),a=t(55155),r=t(51460),l=t(8442),o=t(57279),d=t(63304),c=t(54993),h=t(42309);let u=async e=>{let{provider:s,safe:t,message:i,origin:n=""}=e,r=(0,d.iD)(t,i);try{let e=await (0,h.Z3)(s),a=await (0,d.K_)(e,t,i),r=i;(0,d.nW)(i)&&(r=(0,c.mk)(i)),await (0,l.proposeSafeMessage)(t.chainId,t.address.value,{message:r,signature:a,origin:n})}catch(e){throw(0,o.hH)(o.Nd.PROPOSE_FAILED,{messageHash:r,error:(0,a.z)(e)}),e}(0,o.hH)(o.Nd.PROPOSE,{messageHash:r})},g=async e=>{let{provider:s,safe:t,message:i}=e,n=(0,d.iD)(t,i);try{let e=await (0,h.Z3)(s),a=await (0,d.K_)(e,t,i);await (0,l.confirmSafeMessage)(t.chainId,n,{signature:a})}catch(e){throw(0,o.hH)(o.Nd.CONFIRM_PROPOSE_FAILED,{messageHash:n,error:(0,a.z)(e)}),e}(0,o.hH)(o.Nd.CONFIRM_PROPOSE,{messageHash:n})};var m=t(96540),x=t(6459);let f=async(e,s)=>{let t;try{t={...await (0,l.getSafeMessage)(s,e),type:l.SafeMessageListItemType.MESSAGE}}catch(e){throw(0,n.vV)(n.I._613,e),e}return t},j=(e,s,t,n,l,o)=>{let[d,c]=(0,m.useState)(),h=(0,i.Ay)(),{safe:j}=(0,x.A)();return(0,m.useEffect)(()=>{let s;return(null==e?void 0:e.preparedSignature)&&(s=setTimeout(()=>(0,r.Q)(e,t,o,n),3e3)),()=>clearTimeout(s)},[e,j.chainId,t,o,n]),{submitError:d,onSign:(0,m.useCallback)(async()=>{if(h){c(void 0);try{if(e){if(await g({provider:h.provider,safe:j,message:s}),!n){o();return}let e=await f(t,j.chainId);return setTimeout(()=>(0,r.Q)(e,t,o,n),3e3),e}{await u({provider:h.provider,safe:j,message:s,origin:l});let e=await f(t,j.chainId);return 1===j.threshold&&setTimeout(()=>(0,r.Q)(e,t,o,n),3e3),e}}catch(e){c((0,a.z)(e))}}},[h,j,e,s,l,t,o,n])}}},38105:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var i=t(96540);let n="‼️ ",a=(e,s)=>{e&&(e.href=s)},r=e=>{document.title=e?n+document.title:document.title.replace(n,"")},l=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=()=>{r(t),a(e,t?"/favicons/favicon-dot.ico":s),t=!t};return i(),setInterval(i,300)},o=()=>{(0,i.useEffect)(()=>{let e;let s=document.querySelector('link[rel*="icon"]'),t=(null==s?void 0:s.href)||"",i=()=>{clearInterval(e),a(s,t),r(!1)},n=()=>{document.hidden?e=l(s,t):i()};return document.addEventListener("visibilitychange",n),n(),()=>{i(),document.removeEventListener("visibilitychange",n)}},[])}},51460:(e,s,t)=>{"use strict";t.d(s,{Q:()=>a});var i=t(57279);let n=e=>e.confirmationsSubmitted>=e.confirmationsRequired&&!!e.preparedSignature,a=async(e,s,t,a)=>{n(e)&&((0,i.hH)(i.Nd.SIGNATURE_PREPARED,{messageHash:s,requestId:a,signature:e.preparedSignature}),t())}},59045:e=>{e.exports={container:"styles_container__sAIKm",message:"styles_message__G1Adl",details:"styles_details__m9_zQ",divider:"styles_divider__hXKbs"}},32150:e=>{e.exports={container:"styles_container__sq4dv",message:"styles_message__X3rNR",details:"styles_details___XV55"}}}]);
//# sourceMappingURL=3226.36cead47897cba80.js.map